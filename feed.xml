<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Rants from the Ballmer Peak</title>
  <link href="http://gradha.github.io/" />
  <link href="http://gradha.github.io/feed.xml" rel="self" />
  <id>http://gradha.github.io/</id>
  <generator>ipsumgenera</generator>
  <updated>2014-07-09T18:07:34Z</updated>
    <entry>
      <title>Why I will never use an iWatch</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/07/why-i-will-never-use-an-iwatch.html"/>
      <id>http://gradha.github.io/articles/2014/07/why-i-will-never-use-an-iwatch.html</id>
      <published>2014-07-09T19:05:00Z</published>
      <updated>2014-07-09T19:05:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;Why I will never use an iWatch&lt;/h1&gt;&lt;p&gt;Because I've always hated things on my arms. I don't wear any and don't plan to.&lt;/p&gt;
&lt;p&gt;Wow, that was short and sweet for a change!&lt;/p&gt;
&lt;pre class='literal'&gt;$ date -u
miércoles,  9 de julio de 2014, 18:05:42 UTC&lt;/pre&gt;
      </content>
    </entry>
    <entry>
      <title>Dirrty objects, in dirrty Nimrod</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/06/dirrty-objects-in-dirrty-nimrod.html"/>
      <id>http://gradha.github.io/articles/2014/06/dirrty-objects-in-dirrty-nimrod.html</id>
      <published>2014-06-07T19:23:00Z</published>
      <updated>2014-06-07T19:23:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;Dirrty objects, in dirrty Nimrod&lt;/h1&gt;&lt;p&gt;This article has been optimized for search engines by using the misspelled word &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt;. If you came here looking for some hot girls, please go instead to Youtube to watch &lt;a href=&quot;https://www.youtube.com/watch?v=4Rg3sAb8Id8&quot;&gt;Christina Aguilera's Dirrty video&lt;/a&gt; where she works it out. At the moment of writing this article the video records 7.226.476 views, some more won't hurt. For all the other boring people, welcome again to another technical article only worth reading while you wait for the compiler to do its job (or for your browser to render some JavaScript, if you are one of those hipster types).&lt;/p&gt;
&lt;p&gt;In what looks like a distant past, I used to write Objective-C code for the iPhone. In one of the projects, a little client consuming JSON would fetch news from a web server and cache them locally using SQLite. The code I initially wrote worked fine for about 50 to 100 items, which was the expected workload. Years later this code was moved to another project where the item requirement jumped to over 600+ items and suddenly the user interface was all jerky. As if you were using a cheap Android device instead of the silky smooth luxury car the iPhone feels like (platform fanboys will be glad to know I replicated the silky smooth experience on Android 2.1 devices with less computing power than a cereal box).&lt;/p&gt;
&lt;p&gt;Certainly 600 didn't seem an incredibly big number (though it was &lt;a href=&quot;https://en.wikipedia.org/wiki/300_(comics)&quot;&gt;twice as Sparta&lt;/a&gt;, respekt man), so why was it all slow suddenly?  Fortunately there were two things I could quickly do to alleviate the problem and not look back:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;SQL transactions.&lt;/li&gt;&lt;li&gt;Marking objects as &lt;a href=&quot;https://en.wikipedia.org/wiki/Dirrty&quot;&gt;dirrty&lt;/a&gt;.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Experienced Objective-C programmers with knowledge of &lt;a href=&quot;https://en.wikipedia.org/wiki/Core_Data&quot;&gt;Core Data&lt;/a&gt; will surely roll their eyes at this point as both of these problems are handled automatically by the framework. The SQL transactions is the obvious facepalm: using a database without taking care of transactions is like pushing a bicycle instead of riding it. You have this shiny thingy beside you which helps you and you are ignoring it. But after placing a few BEGIN/COMMIT here and there the saving wasn't instant yet (remember, you have to aim for perfect, always).&lt;/p&gt;
&lt;p&gt;The 600+ item requirement didn't actually come from increased network traffic. The server would still serve data in chunks of about 50 items. However, the items would be cached locally until a certain expiration date and thus when new items arrived the older ones were still there. That was the problem: the code was blindly saving all the objects even when they had not changed at all. That's where the &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; flag comes, the code would mark any new or modified object as &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; and the SQLite saving code would skip the items without this flag.  With these two new measures in place the client performed again seemingly instantly and scrolling was fast again even on first generation devices.&lt;/p&gt;
&lt;h1&gt;The reference Objective-C implementation&lt;/h1&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/File:Dirrty_Slutdrop.jpg&quot;&gt;&lt;img
    src=&quot;../../../i/wikipedia_slutdrop.jpg&quot;
    alt=&quot;Christina doing the slutdrop&quot;
    style=&quot;width:100%;max-width:750px&quot; align=&quot;right&quot;
    hspace=&quot;8pt&quot; vspace=&quot;8pt&quot;&gt;&lt;/a&gt;&lt;p&gt;The implementation of the &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; flag is not really hard at all, just tedious. In Objective-C you tend to build your serialized objects around an inheritance tree where the base class provides the basic serialization methods. Subclasses can then call &lt;code&gt;super&lt;/code&gt; and extend the serialization (in my case, JSON dictionaries) with whatever new properties the parent class was not aware of.&lt;/p&gt;
&lt;p&gt;The first step is to create a data model super class which already contains the &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; flag. Then you provide setter/getters for properties. In Objective-C setters/getters can be implemented by the compiler automatically through &lt;code&gt;@property&lt;/code&gt; and &lt;code&gt;@synthethize&lt;/code&gt;. But you can also implement them yourself. In my case I created the following C macros which would expand to setters marking the &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; flag:&lt;/p&gt;

&lt;br clear=&quot;right&quot;&gt;&lt;pre class='literal'&gt;
#define SS_DIRRTY_ASSIGN_SETTER(NAME,TYPE,VAR) \
    - (void)NAME:(TYPE)VAR { \
            VAR ## _ = VAR; \
            dirrty_ = YES; \
    }

#define SS_DIRRTY_RETAIN_SETTER(NAME,TYPE,VAR) \
    - (void)NAME:(TYPE)VAR { \
            [VAR retain]; \
            [VAR ## _ release]; \
            VAR ## _ = VAR; \
            dirrty_ = YES; \
    }

// Actual later usage:
SS_DIRRTY_RETAIN_SETTER(setBody, NSString*, body)
SS_DIRRTY_RETAIN_SETTER(setFooter, NSString*, footer)&lt;/pre&gt;&lt;p&gt;Not the prettiest code in the world, but works fine. There are two versions of the macro, one for scalar values and another for objects which requires the &lt;code&gt;retain/release&lt;/code&gt; dance. The last two lines would be seen in a subclass implementation file where they would expand to a setter updating the &lt;code&gt;dirrty_&lt;/code&gt; flag. In recent Objective-C versions the getter is generated by the compiler, but we could add the getter generation to these macros as well for ancient compiler compatibility.&lt;/p&gt;
&lt;h1&gt;Dirrtying Nimrod&lt;/h1&gt;&lt;p&gt;In the &lt;a href=&quot;http://nimrod-lang.org&quot;&gt;Nimrod programming language&lt;/a&gt; we can replicate the C macros with some improvements. Here is the code of a &lt;code&gt;utils.nim&lt;/code&gt; file:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;macros&lt;/span&gt;

&lt;span class=&quot;Comment&quot;&gt;# Create a superclass with the dirrty flag.&lt;/span&gt;
&lt;span class=&quot;Keyword&quot;&gt;type&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;Dirrty&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;TObject&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;dirrty&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;bool&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;macro&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;generateProperties&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;objType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;varType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;expr&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;stmt&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Comment&quot;&gt;# Create identifiers from the parameters.&lt;/span&gt;
  &lt;span class=&quot;Keyword&quot;&gt;let&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;setter&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;varName&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;=&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;iVar&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;F&amp;quot;&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;getter&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;varName&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;Comment&quot;&gt;# Generate the code using quasiquoting.&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;quote&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;setter&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;objType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;varType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;inline&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
      &lt;span class=&quot;Identifier&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;iVar&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;value&lt;/span&gt;
      &lt;span class=&quot;Identifier&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;dirrty&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;true&lt;/span&gt;
    
    &lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;objType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;varType&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;inline&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
      &lt;span class=&quot;Identifier&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;iVar&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;As scary as this code may look to any beginner in the language, the nice thing is that you can put it aside in a separate file and not look at it ever again. It is not very difficult to understand either. The first thing it does is import the &lt;a href=&quot;http://nimrod-lang.org/macros.html&quot;&gt;macros module&lt;/a&gt; which contains many meta programming helpers. Then it defines a &lt;code&gt;Dirrty&lt;/code&gt; base class which includes the &lt;code&gt;dirrty: bool&lt;/code&gt; field. User defined objects will inherit from the class.&lt;/p&gt;
&lt;p&gt;The second (scary) thing this code does is define the &lt;code&gt;generateProperties&lt;/code&gt; macro. This macro accepts a user defined type, a variable name, and the type of this variable. Then proceeds to create in the &lt;code&gt;let&lt;/code&gt; block the names of the setter, getter and instance variable that will be used to access the object. This is done &lt;a href=&quot;http://nimrod-lang.org/macros.html#$,PNimrodSymbol&quot;&gt;converting the parameter Nimrod symbol to a string&lt;/a&gt;, mangling the string, then &lt;a href=&quot;http://nimrod-lang.org/macros.html#!,string&quot;&gt;constructing again an identifier from this new string&lt;/a&gt;. Note how you can apply crazy logic here depending on names of the variables, something which is hard or impossible to do in C macros.&lt;/p&gt;
&lt;p&gt;Once the identifiers are generated, using &lt;a href=&quot;http://nimrod-lang.org/macros.html#quote&quot;&gt;quasi-quoting&lt;/a&gt; we define a setter and getter proc with the generated identifiers. The backticks are what will be replaced in the final code, and all of this is assigned to the result of the macro, thus generating the wanted code. Whenever this call is found, the Nimrod compiler will generate the setter and getter for us. Now let's see a typical usage of this macro:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;utils&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;type&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;Dirrty&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;Fname&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;Fsurname&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;Fage&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;Identifier&quot;&gt;generateProperties&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;Identifier&quot;&gt;generateProperties&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;surname&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;Identifier&quot;&gt;generateProperties&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Comment&quot;&gt;## Exercise the setters and getters.&lt;/span&gt;
  &lt;span class=&quot;Keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;Person&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;Christina&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;Is &amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot; dirrty? &amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;dirrty&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;isMainModule&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt; The &lt;code&gt;Person&lt;/code&gt; object defined here inherits from our &lt;code&gt;Dirrty&lt;/code&gt; base class and uses the &lt;a href=&quot;http://nimrod-lang.org/tut2.html#properties&quot;&gt;getter and setter convention&lt;/a&gt; of creating a &lt;span style=&quot;font-style: italic;&quot;&gt;private&lt;/span&gt; variable with the &lt;span style=&quot;font-weight: bold;&quot;&gt;F&lt;/span&gt; prefix. This variable can be accessed only from the current unit. After the type declaration we invoke the &lt;code&gt;generateProperties&lt;/code&gt; macro to &lt;span style=&quot;font-style: italic;&quot;&gt;produce&lt;/span&gt; at compilation time the setter and getter for each of the fields.&lt;/p&gt;
&lt;p&gt;What follows is a basic &lt;code&gt;test&lt;/code&gt; proc which verifies our assumptions by creating a &lt;code&gt;Person&lt;/code&gt; object, then echoing to screen the state of the &lt;span style=&quot;font-weight: bold;&quot;&gt;dirrty&lt;/span&gt; flag after using the generated setter to name it &lt;span style=&quot;font-weight: bold;&quot;&gt;Christina&lt;/span&gt;. You can surely expect the result by now:&lt;pre class='literal'&gt;
Is Christina dirrty? true&lt;/pre&gt;&lt;/p&gt;

&lt;center&gt;&lt;img
    src=&quot;../../../i/christina_punch.jpg&quot;
    alt=&quot;Hitting adversaries one macro at a time&quot;
    style=&quot;width:100%;max-width:750px&quot;
    hspace=&quot;8pt&quot; vspace=&quot;8pt&quot;&gt;&lt;/center&gt;&lt;br&gt;&lt;h1&gt;Conclusion&lt;/h1&gt;&lt;p&gt;In these few lines of code we have not just solved the hypothetical problem of marking automatically a flag in setter procs: we have actually implemented Objective-C style properties. Let that sink in. Nimrod doesn't provide properties, but instead it is flexible enough that it allows you, the end user programmer, to define your own language constructs. And you know what happens if you program in a language not flexible enough to stand the test of time? Yes, you are &lt;a href=&quot;https://developer.apple.com/swift/&quot;&gt;forced to switch to new incompatible languages&lt;/a&gt;. Otherwise you are stuck in the past.&lt;/p&gt;
&lt;p&gt;Could advanced Nimrod meta programming improve this example further?  Could we get rid of having to repeat the type of the field when creating the setters and getters and let the compiler figure it out? Could we avoid having to separate the definition of the object from the definition of the procs?&lt;/p&gt;
&lt;p&gt;Who knows…&lt;/p&gt;
&lt;pre class='literal'&gt;$ playback slutdrop.m4a
Permission denied
Kernel DRM module not found&lt;/pre&gt;
      </content>
    </entry>
    <entry>
      <title>Songs for the NSA</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/05/songs-for-the-nsa.html"/>
      <id>http://gradha.github.io/articles/2014/05/songs-for-the-nsa.html</id>
      <published>2014-05-15T21:45:00Z</published>
      <updated>2014-05-15T21:45:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;Songs for the NSA&lt;/h1&gt;&lt;p&gt;In some firms there is silence at work. In others the firm pays to have music played globally, maybe because the decision people who want this are incapable of thoughts and the silence of their head scares them. At one of such firms I was lobotomized to love musical hits like &lt;a href=&quot;http://www.youtube.com/watch?v=WsYg48vuOTo&quot;&gt;Christina Aguilera's (aka P2P girl) Genio Atrapado (yes, in Spanish)&lt;/a&gt;, or &lt;a href=&quot;http://www.youtube.com/watch?v=ujuyt65WY0M&quot;&gt;Dame dame sung by Chayanne and Jennifer López&lt;/a&gt;.  It's a shame those two didn't release a promotional video. Or is it just I can't find it? Otherwise it would have looked really hot.&lt;/p&gt;
&lt;p&gt;Anyway, thanks to the revelations made by &lt;a href=&quot;https://en.wikipedia.org/wiki/Edward_Snowden&quot;&gt;Edward Snowden&lt;/a&gt; everybody knows about the &lt;a href=&quot;https://en.wikipedia.org/wiki/Nsa&quot;&gt;Not Such Agency&lt;/a&gt; and their orwellian acts. If they have music played at work, I'm sure their playlist will have hits like &lt;a href=&quot;https://www.youtube.com/watch?v=OMOGaugKpzs&quot;&gt;Every breath you take, by The police&lt;/a&gt;. Let's see some of the lyrics:&lt;/p&gt;

&lt;center&gt;&lt;em&gt;
Every breath you take&lt;br&gt;
And every move you make&lt;br&gt;
Every bond you break, every step you take&lt;br&gt;
I'll be watching you&lt;p&gt;

Every single day&lt;br&gt;
And every word you say&lt;br&gt;
Every game you play, every night you stay&lt;br&gt;
I'll be watching you&lt;p&gt;

Oh can't you see&lt;br&gt;
You belong to me&lt;br&gt;
How my poor heart aches&lt;br&gt;
With every step you take&lt;p&gt;

Every move you make&lt;br&gt;
And every vow you break&lt;br&gt;
Every smile you fake, every claim you stake&lt;br&gt;
I'll be watching you
&lt;/em&gt;&lt;/center&gt;&lt;p&gt;Don't you &lt;span style=&quot;font-weight: bold;&quot;&gt;love&lt;/span&gt; such classics?&lt;/p&gt;
&lt;pre class='literal'&gt;[~]$ cd work
[~/work]$ cd ethics
-bash: cd: ethics: No such file or directory
&lt;/pre&gt;
      </content>
    </entry>
    <entry>
      <title>Testing installation instructions</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/05/testing-installation-instructions.html"/>
      <id>http://gradha.github.io/articles/2014/05/testing-installation-instructions.html</id>
      <published>2014-05-01T17:00:00Z</published>
      <updated>2014-05-01T17:34:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;Testing installation instructions&lt;/h1&gt;&lt;p&gt;Unit testing seems like the most recent and popular &lt;a href=&quot;http://www.urbandictionary.com/define.php?term=e-penis&quot;&gt;e-penis&lt;/a&gt; game in the industry: not only can you brag about useless stuff in big numbers (&lt;span style=&quot;font-style: italic;&quot;&gt;look, we have more than thousand unit tests for stuff nobody uses!&lt;/span&gt;), but you can push this data to upper management and they will pat you on your back for it. Not because they find that unit testing is useful for software, promotes sane development approaches, documents working code and corner cases/bugs, or in general requires some interest in output from code monkeys.  No, they like unit testing because it can be represented as a number associated with specific developers, and the human resources department can compare these numbers over time to increase salaries. &lt;a href=&quot;http://stackoverflow.com/questions/3769716/how-bad-is-sloc-source-lines-of-code-as-a-metric&quot;&gt;It's lines of code all over again, and everybody loves it&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Except for very specific kinds of software, unit testing is likely not very useful to end users. In fact, when you test something &lt;span style=&quot;font-weight: bold;&quot;&gt;which matters&lt;/span&gt; to end users, it stops being called unit testing, and it is called &lt;a href=&quot;https://en.wikipedia.org/wiki/Integration_testing&quot;&gt;integration testing&lt;/a&gt; or &lt;a href=&quot;https://en.wikipedia.org/wiki/Verification_and_validation_(software)&quot;&gt;validation testing&lt;/a&gt;. This is serious crap. Like keeping virtual machines which simulate the &lt;span style=&quot;font-weight: bold;&quot;&gt;first installation&lt;/span&gt; by the user on an otherwise clean state OS (so you know if that 3rd party library you recently added requires an additional DLL install). Or if your software doesn't run in a virtual machine, keeping the hardware machines (with spares) to keep testing newer versions. These kinds of testing tend to take days compared to minutes in the software development.&lt;/p&gt;
&lt;p&gt;Unfortunately they are a pain in the ass to set up, so even important projects don't care about them and depend on beta test… er, users, to tell them something has gone wrong. One critical point of many open source projects which goes untested is: installation instructions. You know, the little sequence of commands which tells you what to do to actually get the source code, build it, and maybe install it. Either in binary or source form, installation instructions are the first step for your users and other potential developers to know about you. Bad installation instructions are the equivalent of a web page which never loads: users will look elsewhere. Yet they are not that difficult to test. In fact, everybody should be testing them.&lt;/p&gt;
&lt;h2&gt;Testing dropbox_filename_sanitizer&lt;/h2&gt;&lt;p&gt;For this article I'll be using my own &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer&quot;&gt;dropbox_filename_sanitizer project&lt;/a&gt; because pointing errors in other people's software is too easy and doesn't enrich me. This project also offers a nice range of things to test: there is a stable source code installation, a development source code installation, and a pre built binary installation. In addition the program is implemented with the &lt;a href=&quot;http://nimrod-lang.org&quot;&gt;Nimrod programming language&lt;/a&gt; which &lt;a href=&quot;http://nimrod-lang.org/news.html#Z2014-04-21-version-0-9-4-released&quot;&gt;recently released version 0.9.4&lt;/a&gt;. A programming language in development may well render the source code useless between versions, so we will have to expand the source code tests to cover one using the stable compiler release and another using the unstable one. If my math is not wrong, that's more than a single test, enough to impress your mom.&lt;/p&gt;
&lt;p&gt;The platforms to test are MacOSX and Linux. You can test Windows too, you can do nice things with &lt;a href=&quot;https://oracleexamples.wordpress.com/2011/08/12/virtualbox-script-to-control-virtual-machines/&quot;&gt;VirtualBox alone&lt;/a&gt; or &lt;a href=&quot;http://www.vagrantup.com/blog/feature-preview-vagrant-1-6-windows.html&quot;&gt;with additional tools like Vagrant&lt;/a&gt;, but I don't own any Windows licenses and have little interest in getting one. Since both target platforms are Unix-like, we will be able to reuse the scripting for both using &lt;a href=&quot;https://www.gnu.org/software/bash/&quot;&gt;bash&lt;/a&gt; or whatever shell used by the systems used to run the test cases (if you don't control the environment, like on virtual host). We won't go the full virtual machine route because it is time expensive, and also because we can easily emulate nearly clean state environments through additional users.&lt;/p&gt;

&lt;img
    src=&quot;../../../i/nuke_orbit.jpg&quot;
    alt=&quot;The only sane approach to software testing&quot;
    style=&quot;width:100%;max-width:600px&quot; align=&quot;right&quot;
    hspace=&quot;8pt&quot; vspace=&quot;8pt&quot;&gt;&lt;p&gt;The strategy then is to create a separate user for testing in your own machine. This user won't have any of the installed dependencies required for installation, and we will install everything in specific directories which can later be erased to prevent them from polluting future tests. If the software you are using requires installation in global paths, you need a virtual machine then anyway. Certainly you don't &lt;span style=&quot;font-style: italic;&quot;&gt;trust&lt;/span&gt; software to have a good uninstallation mechanism, do you?&lt;/p&gt;
&lt;p&gt;A separate user account on the machine is easier to nuke from orbit should anything go wrong, but it also helps to keep yourself honest about the testing environment. If you run the tests as your development user many little environment changes can creep in and alter the tests. First we will write some code which will gather necessary runtime variables from the development environment or from json files producing a bash script. Then we copy the bash script to the user through a &lt;a href=&quot;https://en.wikipedia.org/wiki/Secure_Shell&quot;&gt;secure shell&lt;/a&gt; and run it remotely.&lt;/p&gt;
&lt;p&gt;The secure shell abstraction forces us to make a script which works remotely, can be run at any time, and we can run one instance in our development machine (MacOSX) and another one on a virtual box or hosted server (Linux). Secure shells are also easier to set up with public/private keys to avoid interactive prompts during testing. Of course you can set up passwords into the test scripts, but you have to be careful about &lt;a href=&quot;https://stewilliams.com/silly-gits-upload-private-crypto-keys-to-public-github-projects/&quot;&gt;private secrets not leaking to public repositories&lt;/a&gt;. Making sure the user ssh setup is &lt;span style=&quot;font-weight: bold;&quot;&gt;not&lt;/span&gt; part of your software repository can sometimes be a good thing.&lt;/p&gt;
&lt;h2&gt;Testing the stable babel installation&lt;/h2&gt;&lt;p&gt;To install the stable version of dropbox_filename_sanitizer the user only has to type the following commands:&lt;pre class='literal'&gt;
$ babel update
$ babel install argument_parser
$ babel install dropbox_filename_sanitizer&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Fun fact: presumably you don't have to install &lt;a href=&quot;https://github.com/gradha/argument_parser&quot;&gt;argument_parser&lt;/a&gt; manually since &lt;a href=&quot;https://github.com/nimrod-code/babel&quot;&gt;babel&lt;/a&gt; will take care of dependencies. Unfortunately &lt;a href=&quot;https://github.com/nimrod-code/babel/issues/37&quot;&gt;a bug prevents correct installation&lt;/a&gt; due to a mistake in handling version numbers. Yes, the problem was found while &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/issues/12&quot;&gt;setting up the project for testing&lt;/a&gt; in advance for this blog post. Bug inception!&lt;/p&gt;
&lt;p&gt;Since the project already features a &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/blob/master/nakefile.nim&quot;&gt;nakefile&lt;/a&gt; which drives other tasks (see the &lt;a href=&quot;https://github.com/fowlmouth/nake&quot;&gt;nake project&lt;/a&gt;) I decided to add a &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/blob/329d5e7a52e5b4a705f89a68a751ce698e941501/nakefile.nim#L372&quot;&gt;shell_test&lt;/a&gt; command. This command accepts &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/tree/329d5e7a52e5b4a705f89a68a751ce698e941501/shell_tests&quot;&gt;json files&lt;/a&gt; which contain some parameters of what is to be tested. Let's see &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/blob/329d5e7a52e5b4a705f89a68a751ce698e941501/shell_tests/macosx_igor_nimrod_devel_chunk1.json&quot;&gt;one of those json files first&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;host&lt;/code&gt;, &lt;code&gt;user&lt;/code&gt;: These are the typical host and user parameters for the secure shell. Use &lt;code&gt;localhost&lt;/code&gt; and a different user on your own machine to simulate a clean install.&lt;/li&gt;&lt;li&gt;&lt;code&gt;nimrod_branch&lt;/code&gt;: Specifies which branch to check out for the Nimrod compiler. You can specify tags as well for previous releases. In this case, we use the development branch.&lt;/li&gt;&lt;li&gt;&lt;code&gt;nimrod_version_str&lt;/code&gt;: The string we will use with &lt;a href=&quot;https://www.gnu.org/software/grep/&quot;&gt;grep&lt;/a&gt; in the script to verify that the compiler we invoke is the proper one. Since this is the development version, we don't care about the version, but stable version checking will feature a specific number (like 0.9.4).&lt;/li&gt;&lt;li&gt;&lt;code&gt;nimrod_csources_branch&lt;/code&gt;: Similar to &lt;code&gt;nimrod_branch&lt;/code&gt;, this is the branch used by the sub repository csources required by the compiler.&lt;/li&gt;&lt;li&gt;&lt;code&gt;chunk_file&lt;/code&gt;: Name of the documentation file we will extract installation steps performed by the user.&lt;/li&gt;&lt;li&gt;&lt;code&gt;chunk_number&lt;/code&gt;: Index of the instructions &lt;span style=&quot;font-style: italic;&quot;&gt;block&lt;/span&gt; that we are testing. The readme features several possible instructions, having different json files for each block.&lt;/li&gt;&lt;li&gt;&lt;code&gt;bin_version&lt;/code&gt;: Similar to &lt;code&gt;nimrod_version_str&lt;/code&gt;, this parameter specifies if we are testing against the development version of dropbox_filename_sanitizer (which will get the number directly imported from the module) or the last stable version (which will be obtained from git tags).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The nakefile code for the task is a little bit split and tough to follow sequentially, so I've put at &lt;a href=&quot;https://gist.github.com/gradha/aff3c6d53657a27e4cae&quot;&gt;https://gist.github.com/gradha/aff3c6d53657a27e4cae&lt;/a&gt; an example of generated shell script. This is the shell script that is copied to the remote user and run as is. The only dependency required is a working compiler. The script first sets up some variables to reuse, removes previous temporary files which could have been left from failure runs, and starts to install both the Nimrod compiler and babel. Quite boring, but necessary.&lt;/p&gt;
&lt;p&gt;By the very end of the script, &lt;a href=&quot;https://gist.github.com/gradha/aff3c6d53657a27e4cae#file-shell_test_1398956253-sh-L58&quot;&gt;on line 58&lt;/a&gt; you will recognise the three commands mentioned above to update babel, install argument_parser, then install the program. &lt;a href=&quot;https://gist.github.com/gradha/aff3c6d53657a27e4cae#file-shell_test_1398956253-sh-L54&quot;&gt;Previously line 54&lt;/a&gt; did export the private babel binary directory (&lt;code&gt;.babel/bin&lt;/code&gt;) to test a normal user invoking the binary without typing the full path to it. This can be seen in the &lt;a href=&quot;https://gist.github.com/gradha/aff3c6d53657a27e4cae#file-shell_test_1398956253-sh-L62&quot;&gt;last test line 62&lt;/a&gt; which verifies the installed version of the command running the command's &lt;code&gt;--version&lt;/code&gt; switch piped to &lt;a href=&quot;https://www.gnu.org/software/grep/&quot;&gt;grep&lt;/a&gt;. If &lt;code&gt;grep&lt;/code&gt; doesn't find a match it will return an error, which will abort the whole script, courtesy of &lt;a href=&quot;https://gist.github.com/gradha/aff3c6d53657a27e4cae#file-shell_test_1398956253-sh-L4&quot;&gt;line 4 forcing immediate exit&lt;/a&gt; if any of the following commands returns a non zero error status.&lt;/p&gt;
&lt;h2&gt;Testing the development babel installation&lt;/h2&gt;&lt;p&gt;To install the development version of dropbox_filename_sanitizer the user has to type a little bit more:&lt;pre class='literal'&gt;
$ babel update
$ babel install argument_parser
$ git clone https://github.com/gradha/dropbox_filename_sanitizer.git
$ cd dropbox_filename_sanitizer
$ babel install&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The only difference is that instead of asking babel to fetch the package we clone the git repository and install it manually by omitting the parameter (and having a &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/blob/master/dropbox_filename_sanitizer.babel&quot;&gt;babel spec file available&lt;/a&gt; in the working directory). The only difference between the stable and development versions of the test script will be the lines run to install the software. These lines are obtained through the previously mentioned &lt;code&gt;chunk_number&lt;/code&gt; parameter in the json file.  The crude &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/blob/329d5e7a52e5b4a705f89a68a751ce698e941501/nakefile.nim#L252&quot;&gt;gen_chunk_script&lt;/a&gt; proc in the nakefile will parse the readme and extract all the lines for whatever block was specified. One could go hi-tech and use the &lt;a href=&quot;http://nimrod-lang.org/rst_module.html&quot;&gt;rst nimrod module&lt;/a&gt; to parse the readme, but simple line stripping serves well.&lt;/p&gt;
&lt;h2&gt;Testing the pre built binaries&lt;/h2&gt;&lt;p&gt;I haven't bothered yet to do this for a very simple reason: you only need to test this once. The compiled binaries work without dependencies, so by the time you create them, you test them yourself once and… that's it! It's the source installation which depends on many more steps and packages which can go wrong. Certainly there is room to test for &lt;a href=&quot;https://github.com/gradha/dropbox_filename_sanitizer/issues/11&quot;&gt;failures in the packaging itself&lt;/a&gt;, but the packaging itself is automated. Maybe if I get very bored I'll do it.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;img
    src=&quot;../../../i/so_metal.jpg&quot;
    alt=&quot;Tiffany approves&quot;
    style=&quot;width:100%;max-width:750px&quot; align=&quot;right&quot;
    hspace=&quot;8pt&quot; vspace=&quot;8pt&quot;&gt;&lt;p&gt;It takes some time to set these kind of tests, but they are critical: if potential users of your software find that they can't even install it, they won't bother to contact you to fix it, you require a lot of interest for that to happen. So you better know first that something is broken. The huge amount of github projects which don't even compile without tweaking is sad (or maybe I'm just unlucky?).&lt;/p&gt;
&lt;p&gt;As a bonus you know when things go wrong without others having to tell you. Since these integration tests also test external software, you are sort of contributing to the &lt;a href=&quot;http://forum.nimrod-lang.org&quot;&gt;Nimrod community&lt;/a&gt; by testing the compiler (both the last stable and last development versions) and the approved package manager used by many others.&lt;/p&gt;
&lt;p&gt;I've wondered if these tests should go the route of continuous integration. That seems to be a lot of work but possible through &lt;a href=&quot;https://developer.github.com/v3/repos/hooks/&quot;&gt;GitHub webhooks&lt;/a&gt;. On the other hand maybe webhooks don't work for watching external repositories you don't have control over. Since installation instructions are not going to change from day to day, it would be also possible to write a polling script which every night checks the current nimrod compiler version, and if changed, runs the tests.  Changing from continuous integration to nightly builds is not that bad either and still provides a reasonably fast response to external changes if something goes wrong.&lt;/p&gt;
&lt;p&gt;If you develop a Nimrod based pseudo continuous software tester, let me know!&lt;/p&gt;

&lt;br clear=&quot;right&quot;&gt;&lt;pre class='literal'&gt;$ unzip dropbox_filename_sanitizer-0.4.0-macosx.zip
Archive:  dropbox_filename_sanitizer-0.4.0-macosx.zip
  inflating: dropbox_filename_sanitizer
  inflating: readme.html
  …
$ ./dropbox_filename_sanitizer
-bash: ./dropbox_filename_sanitizer: Permission denied
&lt;/pre&gt;
      </content>
    </entry>
    <entry>
      <title>Could Dropbox switch to Nimrod?</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/04/could-dropbox-switch-to-nimrod.html"/>
      <id>http://gradha.github.io/articles/2014/04/could-dropbox-switch-to-nimrod.html</id>
      <published>2014-04-04T19:12:00Z</published>
      <updated>2014-04-04T19:19:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;Could Dropbox switch to Nimrod?&lt;/h1&gt;&lt;p&gt;More interesting changes have been announced in the language arena &lt;a href=&quot;http://gradha.github.io/articles/2014/04/../03/the-sweet-trap-of-dynamic-languages-and-development-time.html&quot;&gt;just a few days after I wrote my opinion on Facebook announcing the Hack programming language&lt;/a&gt;. So rather than a longish useless rant, this is more like an appendix to that article. The interesting things announced were:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://blogs.msdn.com/b/dotnet/archive/2014/04/02/announcing-net-native-preview.aspx&quot;&gt;Microsoft announces .NET Native&lt;/a&gt;, which essentially compiles C# with their C++ backend.&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://tech.dropbox.com/2014/04/introducing-pyston-an-upcoming-jit-based-python-implementation/&quot;&gt;Dropbox announces Pyston, a JIT-based Python implementation&lt;/a&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Both of these announces highlight that anything dynamic has trouble in the &lt;span style=&quot;font-style: italic;&quot;&gt;real world&lt;/span&gt; out there. Scaling servers is cool, but not having to throw millions at hardware and still meet your goals is even better. The perspective for both companies is different, though. Microsoft is likely targeting &lt;span style=&quot;font-style: italic;&quot;&gt;embedded&lt;/span&gt; developers, aka, writing C# code for Windows Phone or Xbox and keep 60 frames per second while consuming the minimum possible amount of resources. On the other hand, the Dropbox announcement is particularly interesting:&lt;/p&gt;
&lt;blockquote&gt;&lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;After some abandoned experiments with static compilation, we looked around and saw how successfully JIT techniques are being applied in the JavaScript space[...]&amp;quot;&lt;/span&gt;&lt;/blockquote&gt;&lt;p&gt;This is really intriguing. Static compilation tends to solve the performance problems, but might introduce other development downsides. Other commenters of the blog post itself mention several alternatives to statically compiling Python, as in &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;did you try this? why isn't it good?&amp;quot;&lt;/span&gt;.  Many of them have performance limits imposed by the language: you either can't optimize a dynamic language  &lt;span style=&quot;font-style: italic;&quot;&gt;all the way&lt;/span&gt; compared to other statically compiled languages, or you have to restrict yourself to a subset of Python or modify it, which depending on how you do you may need to throw away your existing code.&lt;/p&gt;
&lt;p&gt;But instead of going the way of Facebook and adding optional static typing they are instead keeping the dynamic nature of the language and instead looking at providing &lt;span style=&quot;font-style: italic;&quot;&gt;type speculation&lt;/span&gt;.  Based on the blog post description of &lt;span style=&quot;font-style: italic;&quot;&gt;type speculation&lt;/span&gt;, you can likely understand more by watching the Strange Loop talk &lt;a href=&quot;http://www.infoq.com/presentations/ruby-performance&quot;&gt;Why Ruby Isn't Slow&lt;/a&gt; by &lt;a href=&quot;http://alexgaynor.net&quot;&gt;Alex Gaynor&lt;/a&gt;. Really nice talk, it mentions the &lt;a href=&quot;https://code.google.com/p/rpython/&quot;&gt;horrible RPython implementation&lt;/a&gt; (Alex's words, not mine) which allows defining these &lt;span style=&quot;font-style: italic;&quot;&gt;probabilistic&lt;/span&gt; hints for the optimizer, like: &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;well, this property is now a string, and it is 99% likely going to be a string all the time, so maybe you should actually ignore type checks and indirections and stuff and directly access it like a string&amp;quot;&lt;/span&gt;. If you are interested in dynamic languages evolution and optimization, you can also watch &lt;a href=&quot;http://www.infoq.com/presentations/dynamic-performance&quot;&gt;Fast and Dynamic&lt;/a&gt; by &lt;a href=&quot;https://pointersgonewild.wordpress.com&quot;&gt;Maxime Chevalier-Boisvert&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Of course I would propose using the &lt;a href=&quot;http://nimrod-lang.org&quot;&gt;Nimrod programming language&lt;/a&gt; to any Python programmer looking for a more performant, saner language. But Dropbox didn't start yesterday to write code, and surely they have tons of code. They must have considered that keeping with Python and implementing a faster interpreter is more cost effective than switching to a different language. Don't think just in terms of rewriting code but also in retraining their workforce or hiring people with practical previous experience.&lt;/p&gt;
&lt;p&gt;So unfortunately Nimrod is not a viable option for companies like Dropbox. Not Nimrod, not any other language. Just like I concluded in &lt;a href=&quot;http://gradha.github.io/articles/2014/04/../03/the-sweet-trap-of-dynamic-languages-and-development-time.html&quot;&gt;my previous blog post&lt;/a&gt;, the Dropbox team has &lt;span style=&quot;font-style: italic;&quot;&gt;succeeded&lt;/span&gt; with Python, and now their success is &lt;span style=&quot;font-style: italic;&quot;&gt;killing&lt;/span&gt; them.  Developing a faster interpreter for Python is not a trivial matter, or it would have already been done, so one can only hope that the Dropbox developers &lt;span style=&quot;font-weight: bold;&quot;&gt;really&lt;/span&gt; know what they are doing starting &lt;a href=&quot;https://github.com/dropbox/pyston&quot;&gt;Pyston&lt;/a&gt;. Or maybe they have tons of money to burn, which offsets nearly any worries a normal programmer has about decision failures.&lt;/p&gt;
&lt;pre class='literal'&gt;$ nimrod c -r bank_savings.nim
Traceback (most recent call last)
bank_savings.nim(135)    bank_savings
bank_savings.nim(107)    end_of_month
bank_savings.nim(79)     pay_rent
SIGSEGV: Illegal storage access. (Attempt to read from nil?)
Error: execution of an external program failed
&lt;/pre&gt;
      </content>
    </entry>
    <entry>
      <title>The sweet trap of dynamic languages and development time</title>
      <link rel="alternate" type="text/html" href="http://gradha.github.io/articles/2014/03/the-sweet-trap-of-dynamic-languages-and-development-time.html"/>
      <id>http://gradha.github.io/articles/2014/03/the-sweet-trap-of-dynamic-languages-and-development-time.html</id>
      <published>2014-03-24T21:57:00Z</published>
      <updated>2014-04-04T18:00:00Z</updated>
      <author><name>Grzegorz Adam Hankiewicz</name></author>
      <content type="html">
        &lt;h1&gt;The sweet trap of dynamic languages and development time&lt;/h1&gt;&lt;p&gt;Recently &lt;a href=&quot;https://code.facebook.com/posts/264544830379293/hack-a-new-programming-language-for-hhvm&quot;&gt;Facebook announced Hack, a new programming language for HHVM&lt;/a&gt;. You can read the post yourself, but the summary is they are adding optional static typing to the &lt;a href=&quot;http://php.net/&quot;&gt;PHP&lt;/a&gt; language, transforming it in the process. The concept is not exactly new, if you like the &lt;a href=&quot;https://www.python.org&quot;&gt;Python programming language&lt;/a&gt; but require more performance, you can migrate your code to &lt;a href=&quot;http://cython.org&quot;&gt;Cython&lt;/a&gt;. In both Hack and Cython, final performance is important. If your PHP-like web framework is 100 times faster than &lt;a href=&quot;http://rubyonrails.org&quot;&gt;Ruby on rails&lt;/a&gt; it means that when you want to scale you need 1/100th of the hardware resources. Anything multiplied by 100 in the scale of Facebook is a lot of money. It's a great deal even if it was only 10 times better.&lt;/p&gt;
&lt;p&gt;I know Python very well, and I know Cython as well because I searched for it when I realised how piss poor Python is in terms of computation. If you read Cython's submitted claims of &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;my program went faster by 100 times!&amp;quot;&lt;/span&gt;, well, they might be true. In my particular case I was processing graphic images with the &lt;a href=&quot;http://www.pythonware.com/products/pil/&quot;&gt;Python Imaging Library&lt;/a&gt; and required pixel buffer access. Switching to Cython made my little script change from taking 15 minutes to 30 seconds just by virtue of adding a few type definitions here and there. No algorithm change. Also, no matter how much I attempted to optimize the python version I wouldn't even reach close to the improvement of Cython.&lt;/p&gt;
&lt;p&gt;At that point I really felt back stabbed. I really liked the language: it was easy to write, fast to develop, source code looked very good. But it failed to deliver. Once I started maintaining large Python source code bases I realised dynamic languages have other traps, like refactoring time and necessary unit testing afterwards, or higher quality requirements for documentation because the programming interface tells you nothing (oh, give me an integer, or a string, or whatever you want, I'll just crash and burn later!).&lt;/p&gt;
&lt;p&gt;Performance gains are clear for entities of Facebook scale, but most small or middle size shops may have other pressing issues like time to market, so they choose quick development languages. Do dynamic languages scale? I don't think so, using a dynamic language means that you are only delaying the development cost. Let me explain how.&lt;/p&gt;
&lt;h1&gt;The trap&lt;/h1&gt;
&lt;img
    src=&quot;../../../i/python_trap.jpg&quot;
    alt=&quot;Admiral Ackbar knows where this is going&quot;
    style=&quot;width:100%;max-width:600px&quot; align=&quot;right&quot;
    hspace=&quot;8pt&quot; vspace=&quot;8pt&quot;&gt;&lt;p&gt;Using a dynamic language is like &lt;a href=&quot;http://starwars.wikia.com/wiki/Dark_side_of_the_Force&quot;&gt;the dark side of the force&lt;/a&gt;. Always luring, always tempting. It's easy! It's fast! It's simple! But when your software starts to grow, and you start adding new people to a team, the software crumbles and the dark side enrages you. Suddenly you start devoting an increasingly larger percentage of time to unit testing and fixing your own mistakes. Mistakes which could have been caught if the language didn't make them so easy to do. Mistakes which happen because the API you wrote, you wrote it &lt;span style=&quot;font-style: italic;&quot;&gt;for yourself&lt;/span&gt;, and when somebody else looks at it, he may have a different opinion on how to use it. Did you write proper documentation? Did you write unit testing for all logic paths? Did you check all parameter inputs to see if they are the correct type?&lt;/p&gt;
&lt;p&gt;Much of this is done by a statically compiled language compiler, so instead of unit testing that you are passing a string where you expect there to be an integer, you can unit test real actions done by the user. It's no coincidence that if you look at programming languages, the more unit testing a programming community does (and even prides itself on doing!) the worse the language is at being statically analyzed.  Why require programmers do trivial unit testing when the machine could do it for you?&lt;/p&gt;
&lt;p&gt;The most irritating &lt;span style=&quot;font-style: italic;&quot;&gt;feature&lt;/span&gt; of dynamic languages is that it is really hard to write well behaved deterministic code if you are a library developer. See this little snippet:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;NSURL&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;shortestURL&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;NSArray&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;
&lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;DecNumber&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;Identifier&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;DecNumber&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;absoluteString&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;Operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;testShortestURL&lt;/span&gt;
&lt;span class=&quot;Punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;shorty is %@&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;shortestURL&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;http://www.google.es&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;URLWithString&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;http://google.es&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;Punctuation&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;If you wonder why I chose Objective-C, it's because it is a compiled language, but it behaves like a dynamic language where any object can be anything at any point of time during runtime execution, and for this reason the compiler can't help you. How can this method crash?&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Instead of passing an NSURL, pass an array of NSString objects. It happens to me a lot of times. Just reading the API doesn't tell you the type of the objects stored in the array. That leads to Objective-C code specifying the type of parameters in the method name, increasing verbosity.&lt;/li&gt;&lt;li&gt;If you pass an array with a single string, it works! The &lt;code&gt;shortestURL&lt;/code&gt; method could be renamed to &lt;code&gt;magicallyTransformMyTypes&lt;/code&gt;, since the compiler will treat the passed NSString as a returned NSURL, likely ending in a selector crash later when the ninja NSURL object is accessed.&lt;/li&gt;&lt;li&gt;Being pedantic, you can't even be sure that the &lt;code&gt;urls&lt;/code&gt; parameter is an NSArray. Some JSON code I've seen presumes that the parsed input will return an array, but the JSON could be storing a dictionary. Granted, this is a problem of input validation, but still it happens because most JSON libraries return an &lt;code&gt;id&lt;/code&gt; object instead of an explicit NSDictionary or NSArray, because they don't want to check the type themselves either, leaving the burden on the programmer.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;What happens is that a lot of library code ends up with many useless tests to verify that nothing has gone wrong. The language forces you to do the work a compiler would do. Let's see another example in Python:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Comment&quot;&gt;#!/bin/usr/env python&lt;/span&gt;

&lt;span class=&quot;Identifier&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;
    
    &lt;span class=&quot;Identifier&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;sayHello&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;I'm %s, age %d, and speak %s&amp;quot;&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;Identifier&quot;&gt;rick&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;Rick&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;English&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;Identifier&quot;&gt;rick&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;sayHello&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;If we try to run this code we get:&lt;pre class='literal'&gt;
$ python t.py
Traceback (most recent call last):
  File &amp;quot;t.py&amp;quot;, line 14, in &amp;lt;module&amp;gt;
    rick.sayHello()
  File &amp;quot;t.py&amp;quot;, line 11, in sayHello
    self.age, self.language)
TypeError: %d format: a number is required, not str&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The failure is evident, the first parameter to the convenience constructor should be the age and not the name. The number &lt;code&gt;23&lt;/code&gt; is assigned to &lt;code&gt;self.name&lt;/code&gt; and the string &lt;code&gt;Rick&lt;/code&gt; is assigned to &lt;code&gt;self.age&lt;/code&gt;. Hilarity ensues. In a typed language, like C or C++, the compiler is able to scan the format string and detect that you are passing the wrong type. But this is not possible in Python because there is no static type information. This is such a pain that when I write Python code the first line of the &lt;span style=&quot;font-style: italic;&quot;&gt;docstring&lt;/span&gt; is &lt;a href=&quot;https://github.com/gradha/apptaster-to-html/blob/master/apptaster-to-html.py#L21&quot;&gt;the signature of the method with the parameter names replaced as types&lt;/a&gt;. Example:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Identifier&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;LongStringLit&quot;&gt;&amp;quot;&amp;quot;&amp;quot;f(int, string, string) -&amp;gt; MyFailure
        
        blah blah blah
        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;
        &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Yes, I specify the returned object because you can't be sure either. In Python you can return different types, which is even more fun for programmers calling such functions.  Another case of the programmer hand holding the language. It gets better, though. As user code you can write &lt;code&gt;foo = rick.name&lt;/code&gt; to get the name of the object. What happens if I upgrade the object and rename &lt;code&gt;name&lt;/code&gt; to &lt;code&gt;firstName&lt;/code&gt; and add a &lt;code&gt;lastName&lt;/code&gt;? All the places using the old &lt;code&gt;name&lt;/code&gt; field name will fail. But you won't know until you try. Suddenly when you write code for others you are a prisoner of your initial design, and trying to evolve it is painful process.&lt;/p&gt;
&lt;p&gt;And if you think this is something which is &lt;span style=&quot;font-style: italic;&quot;&gt;in your hand&lt;/span&gt;, think again. When you write your script and distribute it alone, you are depending on the destination machine/environment to have exactly the same version of the software as you had. This hypothetical other machine could have a different version of one of the modules you use which introduce subtle little bugs, or directly throws exceptions. Talking about exceptions, in dynamic languages you can't be sure either, everything can throw an exception at any moment. In statically compiled languages you can indicate that no exceptions have to be thrown, and if a library you use starts to throw a new one, the compiler will not compile your code until you handle the new exception. Good luck unit testing your software with every possible 3rd party library version forever.&lt;/p&gt;
&lt;p&gt;These problems with dynamic languages highlight again why unit testing is precious: the programming language is forcing &lt;span style=&quot;font-weight: bold;&quot;&gt;you&lt;/span&gt; to be the compiler. Why are firms like Facebook &lt;span style=&quot;font-weight: bold;&quot;&gt;adding type information&lt;/span&gt; to a dynamic language rather than writing a static analyzer tool to solve these issues? Surely for such code it would be possible to detect field renames or infer the appropriate types?&lt;/p&gt;
&lt;p&gt;Look at the &lt;a href=&quot;https://code.google.com/p/shedskin/&quot;&gt;Shed Skin experimetal Python to C++ compiler&lt;/a&gt;. You read &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;Oh, a typical speed up of 2-200 times over CPython&amp;quot;&lt;/span&gt; (that is the normal interpreted Python, has no relation to Cython) and start rubbing your hands. But then you look at &lt;a href=&quot;http://shed-skin.blogspot.com.es/2011/09/shed-skin-09.html&quot;&gt;their progress blog posts&lt;/a&gt; and realise it is not a valid solution when it takes 2 minutes to analyze a 3000 line program. Or the fact that this is a restricted version of Python, not every Python code can be ported. Analyzing dynamic language source code to infer the types tends to produces an explosion in compilation time the more complex the source is. There is progress dealing with that, like the Shed Skin compiler shows, but it is still far away from being usable in production.&lt;/p&gt;
&lt;h1&gt;The middle ground&lt;/h1&gt;&lt;p&gt;Languages like C++ &lt;a href=&quot;http://yosefk.com/c++fqa/defective.html&quot;&gt;are not the solution&lt;/a&gt;, and dynamic languages end up disappointing when you grow past single programmer code. Isn't there a middle ground? There is: instead of patching and old decrepit corpse, start from zero using what you have learned. Start using the &lt;a href=&quot;http://nimrod-lang.org&quot;&gt;Nimrod programming language&lt;/a&gt;, which would look like this for the previous examples:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;strutils&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;shortestURL&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;seq&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;TUrl&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;TUrl&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;TUrl&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Keyword&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;DecNumber&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;
  
  &lt;span class=&quot;Keyword&quot;&gt;var&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;DecNumber&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;Keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;..&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;urls&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;Keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;
      &lt;span class=&quot;Identifier&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;Keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;url&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;testShortestURL&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;shorty is &amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;shortestURL&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;TUrl&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;http://www.google.es&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;TUrl&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;http://google.es&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;This version in Nimrod is not very idiomatic (e.g. it does not use the &lt;a href=&quot;http://nimrod-lang.org/tut1.html#result-variable&quot;&gt;implicit result variable&lt;/a&gt;), but on top of offering a much cleaner syntax, this version has the advantage of the compiler doing its work: you can't pass an array of strings instead of an array of TUrl objects. If you try you get:&lt;pre class='literal'&gt;
urls.nim(23, 32) Error: type mismatch: got (seq[string])
but expected one of:
urls.shortestURL(urls: seq[TUrl]): TUrl&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The other derived problems from the lack of types of the Objective-C version also disappear in Nimrod. Let's compare to the python snippet:&lt;/p&gt;
&lt;p&gt;&lt;pre class='code'&gt;&lt;span class=&quot;Keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;strutils&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;type&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Keyword&quot;&gt;object&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;initMyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;sayHello&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;MyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;Identifier&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;I'm $1, age $2, and speak $3&amp;quot;&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;Punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;Keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;rick&lt;/span&gt; &lt;span class=&quot;Operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;Identifier&quot;&gt;initMyFailure&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;StringLit&quot;&gt;&amp;quot;Rick&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;DecNumber&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;StringLit&quot;&gt;&amp;quot;English&amp;quot;&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;Identifier&quot;&gt;rick&lt;/span&gt;&lt;span class=&quot;Operator&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;Identifier&quot;&gt;sayHello&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;Punctuation&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;That looks very close to Python, doesn't it? The differences are:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;You define the class in a separate &lt;code&gt;type&lt;/code&gt; section. The methods (called procs in Nimrod) are defined outside.&lt;/li&gt;&lt;li&gt;Like in the previous example, passing the wrong types as parameter won't compile:&lt;pre class='literal'&gt;
failure.nim(18, 24) Error: type mismatch: got (string, int literal(23), string)
but expected one of:
failure.initMyFailure(age: int, name: string, language: string): MyFailure&lt;/pre&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;In Nimrod there is no string formatting which also converts types on the fly. This is a source of bugs, so you are forced to convert all the parameters to strings, hence the usage of the &lt;code&gt;$&lt;/code&gt; operator to convert the integer to a string. If you forget about this, the compiler will remind you:&lt;pre class='literal'&gt;
failure.nim(16, 19) Error: type mismatch: got (int) but expected 'string'&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;It cracks me up that one of the &lt;a href=&quot;http://legacy.python.org/dev/peps/pep-0020/&quot;&gt;Python mantras&lt;/a&gt; is &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;Explicit is better than implicit&amp;quot;&lt;/span&gt;, yet the whole language is implicit about types, so you can pass anything as a string and it will get formatted. You may not get the output you expected, but hey, that's a feature!&lt;/p&gt;
&lt;/li&gt;&lt;li&gt;If you rename the field to something else, the compiler won't compile anything until you fix all the places trying to use it. Same thing with exceptions, in Nimrod you declare a proc raises none or a number of exceptions through the &lt;a href=&quot;http://nimrod-lang.org/manual.html#exception-tracking&quot;&gt;raises pragma&lt;/a&gt; and don't worry if a 3rd party library changes the exceptions it raises.&lt;/li&gt;&lt;li&gt;Writing Nimrod code is not that much different from the Python version. Note how the &lt;code&gt;var rick&lt;/code&gt; line does not specify the type. This reduces source code noise. You can also use &lt;code&gt;let&lt;/code&gt; instead of &lt;code&gt;var&lt;/code&gt; to declare a variable which can't change. There is no concept of &lt;code&gt;let&lt;/code&gt; or &lt;span style=&quot;font-style: italic;&quot;&gt;const&lt;/span&gt; in Python.&lt;/li&gt;&lt;/ul&gt;&lt;h1&gt;Conclusion&lt;/h1&gt;&lt;p&gt;Nimrod is very close to a friction free dynamic language in terms of source code writing ease, but it is very performant and sane at the same time.  The advantage of using Nimrod is obvious: you invest only a little bit more of time starting a program with Nimrod due to type declarations and making sure the compiler likes them. But as time goes by you start to reap the rewards compared to dynamic languages. On the other hand, if you start with a dynamic language you are very productive in your first days but on the long run you are plagued with other problems which offset that initial performance boost.&lt;/p&gt;
&lt;p&gt;Yes, sure, &lt;span style=&quot;font-style: italic;&quot;&gt;&amp;quot;it's only for a little script&amp;quot;&lt;/span&gt;. Haven't you heard of the typical program written in &lt;a href=&quot;http://www.vb6.us&quot;&gt;Visual Basic 6&lt;/a&gt; which is still in use and the company depends on? Dynamic languages might be more tempting to write something quick and easy, but you are risking a lot by doing so. Success can't be killed, yet it may kill you.&lt;/p&gt;
&lt;pre class='literal'&gt;$ nimrod c -r conclusion.nim
conclusion.nim(27, 33) Info: instantiation from here
conclusion.nim(23, 6) Error: can raise an unlisted exception:
    ref SilentNinjaBreakerOfProductionCode
&lt;/pre&gt;
      </content>
    </entry>
</feed>
