<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang='en'>
	<head>
		<title>Could Dropbox switch to Nimrod? - Rants from the Ballmer Peak</title>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="../../../css/normalize.css">
		<link rel="stylesheet" href="../../../css/style.css">
		<link href="../../../feed.xml" title="Articles" type="application/atom+xml" rel="alternate">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	</head>
	<body>
	<div class="content">
		<h3><a href="../../../index.html">Rants from the Ballmer Peak</a> <a
				href="../../../feed.xml"><img
			alt="rss feed" src="../../../i/Feed-icon.svg"
			width="18pt" height="18pt"></a></h3>
		<h1>Could Dropbox switch to Nim?</h1><p>More interesting changes have been announced in the language arena <a href="../03/the-sweet-trap-of-dynamic-languages-and-development-time.html">just a few days after I wrote my opinion on Facebook announcing the Hack programming language</a>. So rather than a longish useless rant, this is more like an appendix to that article. The interesting things announced were:</p>
<ul><li><a href="http://blogs.msdn.com/b/dotnet/archive/2014/04/02/announcing-net-native-preview.aspx">Microsoft announces .NET Native</a>, which essentially compiles C# with their C++ backend.</li><li><a href="https://tech.dropbox.com/2014/04/introducing-pyston-an-upcoming-jit-based-python-implementation/">Dropbox announces Pyston, a JIT-based Python implementation</a>.</li></ul><p>Both of these announces highlight that anything dynamic has trouble in the <span style="font-style: italic;">real world</span> out there. Scaling servers is cool, but not having to throw millions at hardware and still meet your goals is even better. The perspective for both companies is different, though. Microsoft is likely targeting <span style="font-style: italic;">embedded</span> developers, aka, writing C# code for Windows Phone or Xbox and keep 60 frames per second while consuming the minimum possible amount of resources. On the other hand, the Dropbox announcement is particularly interesting:</p>
<blockquote><span style="font-style: italic;">&quot;After some abandoned experiments with static compilation, we looked around and saw how successfully JIT techniques are being applied in the JavaScript space[...]&quot;</span></blockquote><p>This is really intriguing. Static compilation tends to solve the performance problems, but might introduce other development downsides. Other commenters of the blog post itself mention several alternatives to statically compiling Python, as in <span style="font-style: italic;">&quot;did you try this? why isn't it good?&quot;</span>.  Many of them have performance limits imposed by the language: you either can't optimize a dynamic language  <span style="font-style: italic;">all the way</span> compared to other statically compiled languages, or you have to restrict yourself to a subset of Python or modify it, which depending on how you do you may need to throw away your existing code.</p>
<p>But instead of going the way of Facebook and adding optional static typing they are instead keeping the dynamic nature of the language and instead looking at providing <span style="font-style: italic;">type speculation</span>.  Based on the blog post description of <span style="font-style: italic;">type speculation</span>, you can likely understand more by watching the Strange Loop talk <a href="http://www.infoq.com/presentations/ruby-performance">Why Ruby Isn't Slow</a> by <a href="http://alexgaynor.net">Alex Gaynor</a>. Really nice talk, it mentions the <a href="https://code.google.com/p/rpython/">horrible RPython implementation</a> (Alex's words, not mine) which allows defining these <span style="font-style: italic;">probabilistic</span> hints for the optimizer, like: <span style="font-style: italic;">&quot;well, this property is now a string, and it is 99% likely going to be a string all the time, so maybe you should actually ignore type checks and indirections and stuff and directly access it like a string&quot;</span>. If you are interested in dynamic languages evolution and optimization, you can also watch <a href="http://www.infoq.com/presentations/dynamic-performance">Fast and Dynamic</a> by <a href="https://pointersgonewild.wordpress.com">Maxime Chevalier-Boisvert</a>.</p>
<p>Of course I would propose using the <a href="http://nim-lang.org">Nim programming language</a> to any Python programmer looking for a more performant, saner language. But Dropbox didn't start yesterday to write code, and surely they have tons of code. They must have considered that keeping with Python and implementing a faster interpreter is more cost effective than switching to a different language. Don't think just in terms of rewriting code but also in retraining their workforce or hiring people with practical previous experience.</p>
<p>So unfortunately Nim is not a viable option for companies like Dropbox. Not Nim, not any other language. Just like I concluded in <a href="../03/the-sweet-trap-of-dynamic-languages-and-development-time.html">my previous blog post</a>, the Dropbox team has <span style="font-style: italic;">succeeded</span> with Python, and now their success is <span style="font-style: italic;">killing</span> them.  Developing a faster interpreter for Python is not a trivial matter, or it would have already been done, so one can only hope that the Dropbox developers <span style="font-weight: bold;">really</span> know what they are doing starting <a href="https://github.com/dropbox/pyston">Pyston</a>. Or maybe they have tons of money to burn, which offsets nearly any worries a normal programmer has about decision failures.</p>
<pre class='literal'>$ nim c -r bank_savings.nim
Traceback (most recent call last)
bank_savings.nim(135)    bank_savings
bank_savings.nim(107)    end_of_month
bank_savings.nim(79)     pay_rent
SIGSEGV: Illegal storage access. (Attempt to read from nil?)
Error: execution of an external program failed
</pre>
	</div>
		<hr>
		<p>See <a href="../../../index.html">the article index</a> or browse
		articles by tags:     <a href="../../../tags/programming.html">programming</a>
    ,
    <a href="../../../tags/languages.html">languages</a>
    ,
    <a href="../../../tags/python.html">python</a>
    ,
    <a href="../../../tags/nim.html">nim</a>
    ,
    <a href="../../../tags/nimrod.html">nimrod</a>
    ,
    <a href="../../../tags/dropbox.html">dropbox</a>
    
.<br>Published on: 04/04/2014 19:12. Last update:
			04/04/2014 19:19. <a
			href="../../../feed.xml"><img
			alt="rss feed" src="../../../i/Feed-icon.svg"
			width="18pt" height="18pt"></a><br>
		Copyright 2016 by <a href="../../../about.html">Grzegorz Adam Hankiewicz</a>.<br>
		Generated with <a href="https://github.com/dom96/ipsumgenera">ipsum
			genera</a>. Look at <a
		href="https://github.com/gradha/gradha.github.io">the
		source code</a>.</p>
	</body>
</html>
